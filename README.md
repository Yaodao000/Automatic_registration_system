## 駕照考試報名自動化腳本

這個腳本使用 Puppeteer 自動化瀏覽器操作，用於查詢並自動報名監理服務網（https://www.mvdis.gov.tw/）上的駕照考試梯次。

### 功能

- 自動導航至監理服務網的考試預約頁面。
- 清除預設考試日期。
- 選擇駕照類別（小型車）。
- 輸入指定的考試日期。
- 選擇指定的監理站區域（例如：臺北區監理所）。
- 選擇指定的監理站（例如：板橋監理站）。
- 點擊查詢按鈕。
- 檢查查詢結果表格中的每個梯次是否「額滿」。
- 如果遇到未「額滿」的梯次，自動點擊報名按鈕。
- 自動填寫報名所需的個人資料（身分證字號、生日、姓名、聯絡電話、電子郵件）。
- 點擊最終的報名確認按鈕。
- 如果所有梯次都額滿，腳本會自動重新整理頁面並重複檢查過程，直到找到可報名的梯次或發生錯誤。
- 記錄每次點擊查詢和報名按鈕的時間。

### 必要條件

- Node.js 環境。
- Puppeteer 函式庫。

### 安裝

1.  請確保您已安裝 Node.js。
2.  在您的終端機或命令提示字元中，導航到存放 `main.js` 檔案的目錄。
3.  執行以下命令安裝 Puppeteer：

    ```bash
    npm install puppeteer
    ```

### 如何執行

1.  在終端機或命令提示字元中，導航到存放 `main.js` 檔案的目錄。
2.  執行以下命令啟動腳本：

    ```bash
    node main.js
    ```

3.  腳本將會自動開啟一個瀏覽器視窗，並開始執行自動化流程。

### 設定

腳本中包含一些硬編碼（hardcoded）的資訊，您需要根據您的需求修改 `main.js` 檔案：

- **考試日期**: 在 `page.type("#expectExamDateStr", "1140319");` 這一行，將 `"1140319"` 替換為您想查詢的考試日期（例如：民國年+月+日，`1140319` 代表民國114年03月19日）。
- **監理站區域**: 在 `await page.select("#dmvNoLv1", await page.evaluate(() => document.querySelector("#dmvNoLv1 > option:nth-child(3)").value));` 這一行，`option:nth-child(3)` 對應的是臺北區監理所（北宜花）。如果您需要選擇其他區域，請檢查網頁原始碼或通過瀏覽器開發者工具確定正確的 `:nth-child()` 數字。例如，臺北市區監理所對應的是 `option:nth-child(2)`。
- **監理站**: 在 `await page.select("#dmvNo", await page.evaluate(() => document.querySelector("#dmvNo > option:nth-child(3)").value));` 這一行，`option:nth-child(3)` 對應的是板橋監理站。同樣地，請檢查網頁原始碼確定您想選擇的監理站對應的 `:nth-child()` 數字。

- **個人報名資料**: 以下幾行包含了您的個人資料，請將其替換為您自己的資訊：
    - `await page.type("#idNo",         "");` // 身分證字號
    - `await page.type("#birthdayStr",  "");` // 生日 (民國年+月+日,例:1140101)
    - `await page.type("#name",         "");` // 姓名
    - `await page.type("#contactTel",   "");` // 聯絡電話
    - `await page.type("#email",        "");` // 電子郵件

**注意**: 修改硬編碼的 `:nth-child()` 數字可能需要您對 HTML 結構有一定的了解，或者通過實際運行腳本並觀察來確定正確的選擇器。

### 注意事項

- 腳本依賴於監理服務網頁面的 HTML 結構和元素的 ID/選擇器。如果網站更新，腳本可能需要相應修改。
- 自動填寫個人資料存在隱私風險，請謹慎使用並保管好您的腳本文件。
- 過於頻繁的請求可能會被網站偵測或阻止。
- 腳本在找到未額滿的梯次並報名成功後，會輸出成功信息，但腳本的 `while(true)` 迴圈會使其持續運行，您可能需要手動停止它（在終端機中按 `Ctrl+C`）。如果您只希望報名一次成功就停止，需要修改腳本的迴圈邏輯。


### 未來更新方向
- 將 *個人報名資料* *考試日期* *監理站區域* *監理站* 依照需求修改,並存如 SQL裡(請參考以下描述)
- 輸入*個人報名資料* *考試日期* *監理站區域* *監理站* 並儲存於 SQL裡
- 查看 SQL 中的內容 能夠查看、修改、刪除

請在使用前仔細閱讀並理解腳本的內容和上述說明。 